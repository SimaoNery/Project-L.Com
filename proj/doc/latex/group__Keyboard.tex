\doxysection{Keyboard}
\hypertarget{group__Keyboard}{}\label{group__Keyboard}\index{Keyboard@{Keyboard}}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{group__Keyboard_ga18c596b224bba98ca524a0bfa9730609}{kbc\+\_\+subscribe\+\_\+int}} (uint8\+\_\+t \texorpdfstring{$\ast$}{*}bit\+\_\+no)
\begin{DoxyCompactList}\small\item\em Subscribes to keyboard interrupts. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__Keyboard_ga0e945987c2233f1c30a645ec5fc750c1}{kbc\+\_\+unsubscribe\+\_\+int}} ()
\begin{DoxyCompactList}\small\item\em Unsubscribes from keyboard interrupts. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__Keyboard_ga94bd4739999831fafc0e5e6560aa8687}{kbc\+\_\+int\+\_\+handler}} ()
\begin{DoxyCompactList}\small\item\em Keyboard interrupt handler. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__Keyboard_ga61f4ddd33c411ceee0c71b8890c19775}{kbc\+\_\+restore}} ()
\begin{DoxyCompactList}\small\item\em Restores the keyboard controller to its default state. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Function Documentation}
\Hypertarget{group__Keyboard_ga94bd4739999831fafc0e5e6560aa8687}\index{Keyboard@{Keyboard}!kbc\_int\_handler@{kbc\_int\_handler}}
\index{kbc\_int\_handler@{kbc\_int\_handler}!Keyboard@{Keyboard}}
\doxysubsubsection{\texorpdfstring{kbc\_int\_handler()}{kbc\_int\_handler()}}
{\footnotesize\ttfamily \label{group__Keyboard_ga94bd4739999831fafc0e5e6560aa8687} 
void kbc\+\_\+int\+\_\+handler (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Keyboard interrupt handler. 

Reads the status and output buffer from the Keyboard Controller (KBC). 

Definition at line \mbox{\hyperlink{keyboard_8c_source_l00038}{38}} of file \mbox{\hyperlink{keyboard_8c_source}{keyboard.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00039\ \ \ \ uint8\_t\ status;}
\DoxyCodeLine{00040\ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{group__KBC_ga1ea22dc7f1cd587ad7715408bddb3c4e}{get\_kbc\_status}}(\&status))\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00041\ \ \ \ \textcolor{keywordflow}{if}\ ((status\ \&\ 0xE1)\ !=\ 0x01)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00042\ \ \ \ \mbox{\hyperlink{group__KBC_gabf94de0c90d8a01ca918eadf04065ebb}{read\_kbc\_output}}(OUT\_BUF,\ \&out\_buf,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00043\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__Keyboard_ga94bd4739999831fafc0e5e6560aa8687_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=333pt]{group__Keyboard_ga94bd4739999831fafc0e5e6560aa8687_icgraph}
\end{center}
\end{figure}
\Hypertarget{group__Keyboard_ga61f4ddd33c411ceee0c71b8890c19775}\index{Keyboard@{Keyboard}!kbc\_restore@{kbc\_restore}}
\index{kbc\_restore@{kbc\_restore}!Keyboard@{Keyboard}}
\doxysubsubsection{\texorpdfstring{kbc\_restore()}{kbc\_restore()}}
{\footnotesize\ttfamily \label{group__Keyboard_ga61f4ddd33c411ceee0c71b8890c19775} 
int kbc\+\_\+restore (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Restores the keyboard controller to its default state. 

\begin{DoxyReturn}{Returns}
int Returns 0 upon success and 1 upon failure. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{keyboard_8c_source_l00051}{51}} of file \mbox{\hyperlink{keyboard_8c_source}{keyboard.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00052\ \ \ uint8\_t\ cmd;}
\DoxyCodeLine{00053\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{group__KBC_ga94335c781bc61e7e5f97dbaff386a411}{write\_kbc\_cmd}}(KBC\_IN\_BUF,\ READ\_CMD\_BYTE))\ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00054\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{group__KBC_gabf94de0c90d8a01ca918eadf04065ebb}{read\_kbc\_output}}(OUT\_BUF,\ \&cmd,\ \textcolor{keyword}{false}))\ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00055\ \ \ cmd\ |=\ ENABLE\_KBD\_INT;}
\DoxyCodeLine{00056\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{group__KBC_ga94335c781bc61e7e5f97dbaff386a411}{write\_kbc\_cmd}}(KBC\_IN\_BUF,\ WRT\_CMD\_BYTE))\ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00057\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{group__KBC_ga94335c781bc61e7e5f97dbaff386a411}{write\_kbc\_cmd}}(0x60,\ cmd))\ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00058\ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00059\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group__Keyboard_ga61f4ddd33c411ceee0c71b8890c19775_cgraph}
\end{center}
\end{figure}
\Hypertarget{group__Keyboard_ga18c596b224bba98ca524a0bfa9730609}\index{Keyboard@{Keyboard}!kbc\_subscribe\_int@{kbc\_subscribe\_int}}
\index{kbc\_subscribe\_int@{kbc\_subscribe\_int}!Keyboard@{Keyboard}}
\doxysubsubsection{\texorpdfstring{kbc\_subscribe\_int()}{kbc\_subscribe\_int()}}
{\footnotesize\ttfamily \label{group__Keyboard_ga18c596b224bba98ca524a0bfa9730609} 
int kbc\+\_\+subscribe\+\_\+int (\begin{DoxyParamCaption}\item[{uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{bit\+\_\+no}{}\end{DoxyParamCaption})}



Subscribes to keyboard interrupts. 


\begin{DoxyParams}{Parameters}
{\em bit\+\_\+no} & Pointer to a variable where the bit number will be stored. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int Returns 0 upon success and 1 upon failure. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{keyboard_8c_source_l00017}{17}} of file \mbox{\hyperlink{keyboard_8c_source}{keyboard.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00018\ \ \ \textcolor{keywordflow}{if}\ (bit\_no\ ==\ NULL)\ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00019\ \ \ *bit\_no\ =\ BIT(keyboard\_hook\_id);}
\DoxyCodeLine{00020\ \ \ \textcolor{keywordflow}{return}\ sys\_irqsetpolicy(KBD\_IRQ,\ IRQ\_REENABLE\ |\ IRQ\_EXCLUSIVE,\ \&keyboard\_hook\_id);}
\DoxyCodeLine{00021\ \}}

\end{DoxyCode}
\Hypertarget{group__Keyboard_ga0e945987c2233f1c30a645ec5fc750c1}\index{Keyboard@{Keyboard}!kbc\_unsubscribe\_int@{kbc\_unsubscribe\_int}}
\index{kbc\_unsubscribe\_int@{kbc\_unsubscribe\_int}!Keyboard@{Keyboard}}
\doxysubsubsection{\texorpdfstring{kbc\_unsubscribe\_int()}{kbc\_unsubscribe\_int()}}
{\footnotesize\ttfamily \label{group__Keyboard_ga0e945987c2233f1c30a645ec5fc750c1} 
int kbc\+\_\+unsubscribe\+\_\+int (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Unsubscribes from keyboard interrupts. 

\begin{DoxyReturn}{Returns}
int Returns 0 upon success and 1 upon failure. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{keyboard_8c_source_l00028}{28}} of file \mbox{\hyperlink{keyboard_8c_source}{keyboard.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00029\ \ \ \textcolor{keywordflow}{return}\ sys\_irqrmpolicy(\&keyboard\_hook\_id);}
\DoxyCodeLine{00030\ \}}

\end{DoxyCode}
